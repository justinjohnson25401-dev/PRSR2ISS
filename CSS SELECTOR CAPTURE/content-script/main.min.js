!function o(s,p,a){function c(t,e){if(!p[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=p[t]={exports:{}};s[t][0].call(i.exports,function(e){return c(s[t][1][e]||e)},i,i.exports,o,s,p,a)}return p[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,s,t){!function(e){"use strict";function t(){}var n=t.prototype,r=e.EventEmitter;function o(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}n.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=o(i[r],t))&&i[r].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},n.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return e.EventEmitter=r,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof s&&s.exports?s.exports=t:e.EventEmitter=t}("undefined"!=typeof window?window:this||{})},{}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var c=e("wolfy87-eventemitter"),l=window.$,h=window.angular,i=function(){function e(e,t,n){this.defAppState=e,this.appConfig=t,this.chromeHandle=n}return e.prototype.init=function(){var e=this.getAppElem(),t=e.$appShell,n=e.$fontStyle,r=e.$app,i=e.$link;this.prepApp(t,n,r,i),this.cacheAppElem(t,r),this.enableApp({checkAutoEnable:!0})},e.prototype.sendAppEnabledStatus=function(e){var t=this.isAppEnabled();this.chromeHandle.msgOut("POPUP",e,{isEnabled:t})},e.prototype.toggleApp=function(e){var t=this.isAppEnabled(),n=e.isToEnable;n!==t&&(n?this.enableApp():this.disableApp())},e.prototype.getAppElem=function(){var e=this.appConfig,t=e.app,n=e.appShell,r=e.assetPath,i=chrome.runtime.getURL(r.CSS),o=chrome.runtime.getURL(r.FONT),s=l(n.ELEM),p=l(t.ELEM);return{$appShell:s,$fontStyle:l("<style>@font-face{font-family:'shl-app-icomoon'; src: url('"+o+"') format('woff'); font-weight:normal; font-style:normal;}</style>"),$app:p,$link:l('<link type="text/css" rel="stylesheet">').attr("href",i)}},e.prototype.cacheAppElem=function(e,t){this.$appShell=e,this.$app=t},e.prototype.prepApp=function(e,t,n,r){var i=this,o=e[0].attachShadow({mode:"open"}),s=n[0],p=new c,a=this.appConfig.evt.DISABLE_APP;p.addListener(a,function(){return i.disableApp()}),window.ee=p,e.append(t),h.bootstrap(s,[this.appConfig.app.MODULE]),l(o).append(r,n)},e.prototype.enableApp=function(e){var n=this,r=(void 0===e?{checkAutoEnable:!1}:e).checkAutoEnable;this.chromeHandle.getState(l.Deferred())().then(function(e){var t=n.isMergeStateValid(e,n.defAppState);e&&t||n.chromeHandle.saveState(n.defAppState),!e||r&&!e.autoEnable||n.addApp(t?e:{})})},e.prototype.disableApp=function(){this.rmvApp()},e.prototype.isMergeStateValid=function(e,t){if("object"!==(void 0===e?"undefined":r(e)))return!1;var n=Object.getOwnPropertyNames(e);return!!n.length&&n.every(function(e){return e in t})},e.prototype.isAppEnabled=function(){return!!l(this.appConfig.appShell.SELECTOR).length},e.prototype.addApp=function(e){var t=this,n=this.$appShell,r=this.$app,i=this.appConfig.evt.ENABLE_APP;r.trigger(i,e),n.appendTo("body"),n[0].dispatchEvent(new Event(i)),this.appShellObserver=this.obsvAppShellPosInDom(function(){return t.mvAppShellToBodyEnd(n)})},e.prototype.rmvApp=function(){var e=this.$appShell,t=this.$app,n=this.appShellObserver,r=this.appConfig.evt.DISABLE_APP;t.trigger(r),e[0].dispatchEvent(new Event(r)),n.disconnect(),this.appShellObserver=null,e.remove()},e.prototype.obsvAppShellPosInDom=function(e){var t=new MutationObserver(e);return t.observe(document.body,{childList:!0}),t},e.prototype.mvAppShellToBodyEnd=function(e){var t="body > "+this.appConfig.appShell.SELECTOR;l(t).length&&!l(t+":last-child").length&&e.appendTo("body")},e}();n.AppAdmin=i},{"wolfy87-eventemitter":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../service/constant/app-config.constant"),i=e("../../service/handle/chrome-handle/chrome-handle.service"),o=e("../../service/model/global-state.service"),s=e("../../common/ts/app-admin/app-admin"),p=new o.GlobalState,a=new r.AppConfig,c=new i.ChromeHandle,l=new s.AppAdmin(p,a,c);l.init(),c.onMsg(["POPUP"],function(e,t){"GET_ENABLED_STATE"===e?l.sendAppEnabledStatus(e):"TOGGLE_APP"===e&&l.toggleApp(t)})},{"../../common/ts/app-admin/app-admin":2,"../../service/constant/app-config.constant":4,"../../service/handle/chrome-handle/chrome-handle.service":5,"../../service/model/global-state.service":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){this.appShell={SELECTOR:"shl-app-shell",ELEM:"<shl-app-shell>"},this.app={MODULE:"ShlApp",SELECTOR:"shl-app",ELEM:"<shl-app>"},this.appSetting={SELECTOR:"shl-app-setting"},this.pathBar={SELECTOR:".shl__path"},this.assetPath={FONT:"common/shl-app-icomoon.woff",CSS:"common/app.min.css"},this.evt={ENABLE_APP:"shl-app:on",DISABLE_APP:"shl-app:off"},this.obsvEvt=[{evt:"mouseover",notTarget:"body"},{evt:"scroll",notTarget:"window"},{evt:"resize",target:"window"}],this.errMsg={onSave:"Selector Hilight Extension: There is an error when trying to save the settings, likely due to that the Extension has been disabled or refreshed while the app is on. The extension will now exit and automatically restart itself when the page reloads."}};n.AppConfig=r},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.msgEvtCallback=void 0,this.config={appKey:"ShlApp"}}return e.prototype.getState=function(n){var r=this;return chrome.storage.sync.get(this.config.appKey,function(e){var t=e[r.config.appKey];n.resolve(t)}),n.promise},e.prototype.saveState=function(e){var t={};t[this.config.appKey]=Object.assign({},e),chrome.storage.sync.set(t)},e.prototype.resetState=function(e){chrome.storage.sync.clear(),this.saveState(e)},e.prototype.msgOut=function(e,t,n){var r={app:this.config.appKey,src:"CS",target:e,action:t,appStateToMerge:n};chrome.runtime.sendMessage(r)},e.prototype.onMsg=function(p,a){var c=this;this.msgEvtCallback=function(e){var t=e.app,n=e.src,r=e.action,i=e.appStateToMerge,o=t!==c.config.appKey,s=-1===p.indexOf(n);o||s||a(r,i)},chrome.runtime.onMessage.addListener(this.msgEvtCallback)},e.prototype.rmvOnMsg=function(){this.msgEvtCallback&&(chrome.runtime.onMessage.removeListener(this.msgEvtCallback),this.msgEvtCallback=void 0)},e.prototype.msgCs=function(e,t,n){var r={app:this.config.appKey,target:"CS",src:e,action:t,appStateToMerge:n},i=this.getTabsQueryCbFn(r);chrome.tabs.query({active:!0,currentWindow:!0},i)},e.prototype.getTabsQueryCbFn=function(n){return function(e){var t=e[0].id;chrome.tabs.sendMessage(t,n,void 0,function(){chrome.runtime.lastError&&console.log("message listener is not connected at content script, please refresh the page")})}},e.prototype.openTab=function(e){chrome.tabs.create({url:e})},e}();n.ChromeHandle=r},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){this.autoEnable=!1,this.verboseMode=!0,this.alignPathToTop=!0,this.incl={id:!0,cls:!0,nthChild:!0}};n.GlobalState=r},{}]},{},[2,3]);